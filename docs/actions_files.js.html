<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: actions/files.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: actions/files.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import firebase from '../firebase/FirebaseConfig';
import uuid4 from 'uuid4';

/**
 * Auth File
 * @module actions/file
 *
 */

/**
 * Upload file to storage
 * @function
 * @param {File} file
 * @param {Function} onError
 * @param {Function} onSuccess
 * @param {String} imageName
 * @returns {Promise&lt;*>}
 */
export async function uploadImage(
  file,
  onError,
  onSuccess,
  imageName = uuid4()
) {
  const storage = firebase.storage();
  const nameSplit = file.name.split('.');
  const imageType = nameSplit[nameSplit.length - 1];
  const storageRef = await storage.ref();
  const imgFile = storageRef.child(`images/${imageName}`);
  try {
    const image = await imgFile.put(file);
    onSuccess(null, image);
    return image;
  } catch (e) {
    onError(e);
    return e;
  }
}

/**
 *
 * @param {String} path The path to the file in storage.
 * @function
 * @returns {Promise&lt;any>} promise will return the url for the file path
 */
export const getFileUrl = async path => {
  const storageRef = firebase.storage().ref();
  return await storageRef
    .child(path)
    .getDownloadURL()
    .then(res => {
      return res;
    })
    .catch(err => {
      console.log(err);
      return err;
    });
};

/**
 * Remove the file from storage.
 * @function
 * @param path
 */
export const deleteFile = path => {
  firebase
    .storage()
    .ref()
    .child(path)
    .delete()
    .then(res => {})
    .catch(err => {});
};
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-actions_auth.html">actions/auth</a></li><li><a href="module-actions_comments.html">actions/comments</a></li><li><a href="module-actions_events.html">actions/events</a></li><li><a href="module-actions_file.html">actions/file</a></li><li><a href="module-actions_messaging.html">actions/messaging</a></li><li><a href="module-actions_organizations.html">actions/organizations</a></li><li><a href="module-State.html">State</a></li><li><a href="module-Types.html">Types</a></li></ul><h3>Global</h3><ul><li><a href="global.html#action">action</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Wed Oct 23 2019 20:13:14 GMT-0600 (Mountain Daylight Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
